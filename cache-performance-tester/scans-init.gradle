// Init script to add tags to profiler-generated build scans
rootProject {
    plugins.matching({ it.class.name == "com.gradle.scan.plugin.BuildScanPlugin" }).all {
        gradle.startParameter.buildScan = "true"

        def scenario = System.getProperty("org.gradle.profiler.scenario")
        def phase = System.getProperty("org.gradle.profiler.phase")
        def step = System.getProperty("org.gradle.profiler.step")
        def number = System.getProperty("org.gradle.profiler.number")
        if (scenario) {
            buildScan.tag "gradle-profiler"
            buildScan.value "org.gradle.profiler.scenario", scenario
            buildScan.value "org.gradle.profiler.phase", phase
            buildScan.value "org.gradle.profiler.step", step
            buildScan.value "org.gradle.profiler.number", number
        }
    }
}
